import { useEthers } from '@usedapp/core'
import React , { useState, useEffect } from 'react'
import ReactJson from 'react-json-view'
import { Container, ContentBlock, ContentRow, MainContent, Section, SectionRow } from '../components/base/base'
import { Label } from '../typography/Label'
import { TextInline } from '../typography/Text'
import { Title } from '../typography/Title'
import Avatar from 'react-avatar';
import { Icon } from '@rsuite/icons';
import { AccountButton } from '../components/account/AccountButton'
import { Constants } from '../Constants'

const AboutSvg = React.forwardRef((props, ref) => (
  <svg width="200" height="250" viewBox="0 0 728 136" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="2" y="2" width="724" height="132" rx="30" fill="#8247E5" stroke="#601FCD" stroke-width="4"/>
  <path d="M407.614 54.3848C406.157 53.4968 404.262 53.4968 402.659 54.3848L391.29 61.1923L383.564 65.632L372.196 72.4397C370.738 73.3276 368.843 73.3276 367.24 72.4397L358.203 67.1121C356.745 66.2242 355.725 64.5962 355.725 62.8202V52.3129C355.725 50.537 356.6 48.9091 358.203 48.0211L367.094 42.8414C368.552 41.9535 370.447 41.9535 372.05 42.8414L380.941 48.0211C382.399 48.9091 383.419 50.537 383.419 52.3129V59.1205L391.144 54.5327V47.7251C391.144 45.9492 390.269 44.3214 388.666 43.4334L372.196 33.666C370.738 32.778 368.843 32.778 367.24 33.666L350.478 43.4334C348.875 44.3214 348 45.9492 348 47.7251V67.408C348 69.1838 348.875 70.8118 350.478 71.6997L367.24 81.4671C368.697 82.3552 370.592 82.3552 372.196 81.4671L383.564 74.8075L391.29 70.2198L402.659 63.5602C404.116 62.6723 406.011 62.6723 407.614 63.5602L416.506 68.74C417.963 69.6279 418.983 71.2558 418.983 73.0317V83.5391C418.983 85.3149 418.109 86.9428 416.506 87.8307L407.614 93.1586C406.157 94.0465 404.262 94.0465 402.659 93.1586L393.768 87.9788C392.31 87.0909 391.29 85.463 391.29 83.687V76.8795L383.564 81.4671V88.2748C383.564 90.0506 384.439 91.6785 386.042 92.5665L402.804 102.334C404.262 103.222 406.157 103.222 407.76 102.334L424.522 92.5665C425.98 91.6785 427 90.0506 427 88.2748V68.5919C427 66.8161 426.126 65.1882 424.522 64.3003L407.614 54.3848Z" fill="white"/>
  <path d="M457.177 97V80.655C458.959 82.8869 462.194 84.1341 465.957 84.1341C475.53 84.1341 482 77.3729 482 67.0671C482 56.7612 476.058 50 466.75 50C462.458 50 459.157 51.5754 457.177 54.1355V50.5251H448V97H457.177ZM464.835 76.257C459.883 76.257 456.649 72.581 456.649 67.0671C456.649 61.4874 459.883 57.8115 464.835 57.8115C469.654 57.8115 472.955 61.4874 472.955 67.0671C472.955 72.581 469.654 76.257 464.835 76.257Z" fill="white"/>
  <path d="M502.5 84C512.697 84 520 76.8077 520 67C520 57.1923 512.697 50 502.5 50C492.303 50 485 57.1923 485 67C485 76.8077 492.303 84 502.5 84ZM502.5 76.1539C497.566 76.1539 494.211 72.4269 494.211 67C494.211 61.5077 497.566 57.7808 502.5 57.7808C507.434 57.7808 510.789 61.5077 510.789 67C510.789 72.4269 507.434 76.1539 502.5 76.1539Z" fill="white"/>
  <path d="M535 83V36H526V83H535Z" fill="white"/>
  <path d="M561.775 50L555.001 71.5749L548.162 50H539L550.807 83.1921L546.032 97H554.613L559.194 83.3249L571 50H561.775Z" fill="white"/>
  <path d="M596.757 53.8073C594.909 51.5098 591.608 50 587.581 50C577.876 50 572 56.7612 572 67.0671C572 77.3729 577.876 84.1341 587.713 84.1341C591.608 84.1341 595.107 82.6899 596.823 80.2612V84.5936C596.823 87.6788 594.777 89.845 592.004 89.845H576.687V97H593.456C600.983 97 606 92.4707 606 85.5782V50.5251H596.757V53.8073ZM589.165 76.257C584.28 76.257 581.045 72.6467 581.045 67.0671C581.045 61.4874 584.28 57.8115 589.165 57.8115C594.116 57.8115 597.351 61.4874 597.351 67.0671C597.351 72.6467 594.116 76.257 589.165 76.257Z" fill="white"/>
  <path d="M629.5 84C639.697 84 647 76.8077 647 67C647 57.1923 639.697 50 629.5 50C619.303 50 612 57.1923 612 67C612 76.8077 619.303 84 629.5 84ZM629.5 76.1539C624.566 76.1539 621.211 72.4269 621.211 67C621.211 61.5077 624.566 57.7808 629.5 57.7808C634.434 57.7808 637.789 61.5077 637.789 67C637.789 72.4269 634.434 76.1539 629.5 76.1539Z" fill="white"/>
  <path d="M660.314 83V65.2109C660.314 61.0215 663.175 57.9922 667.233 57.9922C671.091 57.9922 673.686 60.8281 673.686 64.7598V83H683V62.7617C683 55.2852 678.077 50 670.493 50C665.902 50 662.177 51.8691 660.314 55.0273V50.5156H651V83H660.314Z" fill="white"/>
  <path d="M46.8 83V54.2H58.7C58.98 54.2 59.34 54.2133 59.78 54.24C60.22 54.2533 60.6267 54.2933 61 54.36C62.6667 54.6133 64.04 55.1667 65.12 56.02C66.2133 56.8733 67.02 57.9533 67.54 59.26C68.0733 60.5533 68.34 61.9933 68.34 63.58C68.34 65.1533 68.0733 66.5933 67.54 67.9C67.0067 69.1933 66.1933 70.2667 65.1 71.12C64.02 71.9733 62.6533 72.5267 61 72.78C60.6267 72.8333 60.2133 72.8733 59.76 72.9C59.32 72.9267 58.9667 72.94 58.7 72.94H51.62V83H46.8ZM51.62 68.44H58.5C58.7667 68.44 59.0667 68.4267 59.4 68.4C59.7333 68.3733 60.04 68.32 60.32 68.24C61.12 68.04 61.7467 67.6867 62.2 67.18C62.6667 66.6733 62.9933 66.1 63.18 65.46C63.38 64.82 63.48 64.1933 63.48 63.58C63.48 62.9667 63.38 62.34 63.18 61.7C62.9933 61.0467 62.6667 60.4667 62.2 59.96C61.7467 59.4533 61.12 59.1 60.32 58.9C60.04 58.82 59.7333 58.7733 59.4 58.76C59.0667 58.7333 58.7667 58.72 58.5 58.72H51.62V68.44ZM86.5269 83.6C83.6469 83.6 81.1802 82.9733 79.1269 81.72C77.0735 80.4533 75.4935 78.6933 74.3869 76.44C73.2935 74.1867 72.7469 71.5733 72.7469 68.6C72.7469 65.6267 73.2935 63.0133 74.3869 60.76C75.4935 58.5067 77.0735 56.7533 79.1269 55.5C81.1802 54.2333 83.6469 53.6 86.5269 53.6C89.4069 53.6 91.8735 54.2333 93.9269 55.5C95.9935 56.7533 97.5735 58.5067 98.6669 60.76C99.7735 63.0133 100.327 65.6267 100.327 68.6C100.327 71.5733 99.7735 74.1867 98.6669 76.44C97.5735 78.6933 95.9935 80.4533 93.9269 81.72C91.8735 82.9733 89.4069 83.6 86.5269 83.6ZM86.5269 79.06C88.4602 79.0733 90.0669 78.6467 91.3469 77.78C92.6402 76.9133 93.6069 75.6933 94.2469 74.12C94.9002 72.5467 95.2269 70.7067 95.2269 68.6C95.2269 66.4933 94.9002 64.6667 94.2469 63.12C93.6069 61.56 92.6402 60.3467 91.3469 59.48C90.0669 58.6133 88.4602 58.1667 86.5269 58.14C84.5935 58.1267 82.9869 58.5533 81.7069 59.42C80.4269 60.2867 79.4602 61.5067 78.8069 63.08C78.1669 64.6533 77.8469 66.4933 77.8469 68.6C77.8469 70.7067 78.1669 72.54 78.8069 74.1C79.4469 75.6467 80.4069 76.8533 81.6869 77.72C82.9802 78.5867 84.5935 79.0333 86.5269 79.06ZM111.177 83L102.757 54.2H107.817L113.557 75L119.277 54.24L124.337 54.2L130.077 75L135.797 54.2H140.857L132.457 83H127.697L121.797 62.52L115.937 83H111.177ZM146.12 83V54.2H164.72V58.72H150.94V65.82H162.32V70.34H150.94V78.48H164.72V83H146.12ZM171.519 83V54.2H183.419C183.699 54.2 184.059 54.2133 184.499 54.24C184.939 54.2533 185.345 54.2933 185.719 54.36C187.385 54.6133 188.759 55.1667 189.839 56.02C190.932 56.8733 191.739 57.9533 192.259 59.26C192.792 60.5533 193.059 61.9933 193.059 63.58C193.059 65.9267 192.465 67.9467 191.279 69.64C190.092 71.32 188.272 72.36 185.819 72.76L183.759 72.94H176.339V83H171.519ZM188.059 83L182.379 71.28L187.279 70.2L193.519 83H188.059ZM176.339 68.44H183.219C183.485 68.44 183.785 68.4267 184.119 68.4C184.452 68.3733 184.759 68.32 185.039 68.24C185.839 68.04 186.465 67.6867 186.919 67.18C187.385 66.6733 187.712 66.1 187.899 65.46C188.099 64.82 188.199 64.1933 188.199 63.58C188.199 62.9667 188.099 62.34 187.899 61.7C187.712 61.0467 187.385 60.4667 186.919 59.96C186.465 59.4533 185.839 59.1 185.039 58.9C184.759 58.82 184.452 58.7733 184.119 58.76C183.785 58.7333 183.485 58.72 183.219 58.72H176.339V68.44ZM199.925 83V54.2H218.525V58.72H204.745V65.82H216.125V70.34H204.745V78.48H218.525V83H199.925ZM225.323 83V54.2H234.503C234.743 54.2 235.217 54.2067 235.923 54.22C236.643 54.2333 237.337 54.28 238.003 54.36C240.283 54.6533 242.21 55.4667 243.783 56.8C245.37 58.12 246.57 59.8067 247.383 61.86C248.197 63.9133 248.603 66.16 248.603 68.6C248.603 71.04 248.197 73.2867 247.383 75.34C246.57 77.3933 245.37 79.0867 243.783 80.42C242.21 81.74 240.283 82.5467 238.003 82.84C237.35 82.92 236.663 82.9667 235.943 82.98C235.223 82.9933 234.743 83 234.503 83H225.323ZM230.223 78.46H234.503C234.903 78.46 235.41 78.4467 236.023 78.42C236.65 78.3933 237.203 78.3333 237.683 78.24C239.043 77.9867 240.15 77.38 241.003 76.42C241.857 75.46 242.483 74.2933 242.883 72.92C243.297 71.5467 243.503 70.1067 243.503 68.6C243.503 67.04 243.297 65.5733 242.883 64.2C242.47 62.8267 241.83 61.6733 240.963 60.74C240.11 59.8067 239.017 59.2133 237.683 58.96C237.203 58.8533 236.65 58.7933 236.023 58.78C235.41 58.7533 234.903 58.74 234.503 58.74H230.223V78.46ZM265.339 83V54.2H276.759C278.706 54.2 280.299 54.5933 281.539 55.38C282.792 56.1533 283.719 57.1467 284.319 58.36C284.932 59.5733 285.239 60.8267 285.239 62.12C285.239 63.7067 284.859 65.0533 284.099 66.16C283.352 67.2667 282.332 68.0133 281.039 68.4V67.4C282.852 67.8133 284.226 68.6733 285.159 69.98C286.106 71.2867 286.579 72.7733 286.579 74.44C286.579 76.1467 286.252 77.64 285.599 78.92C284.946 80.2 283.972 81.2 282.679 81.92C281.399 82.64 279.812 83 277.919 83H265.339ZM270.219 78.46H277.319C278.159 78.46 278.912 78.2933 279.579 77.96C280.246 77.6133 280.766 77.1333 281.139 76.52C281.526 75.8933 281.719 75.1533 281.719 74.3C281.719 73.5267 281.552 72.8333 281.219 72.22C280.886 71.6067 280.399 71.12 279.759 70.76C279.119 70.3867 278.352 70.2 277.459 70.2H270.219V78.46ZM270.219 65.7H276.699C277.392 65.7 278.012 65.5667 278.559 65.3C279.106 65.0333 279.539 64.64 279.859 64.12C280.179 63.6 280.339 62.96 280.339 62.2C280.339 61.2 280.019 60.3667 279.379 59.7C278.739 59.0333 277.846 58.7 276.699 58.7H270.219V65.7ZM298.363 83V71.2L288.562 54.2H294.183L300.803 65.68L307.403 54.2H313.023L303.243 71.2V83H298.363Z" fill="white"/>
  </svg>
));
export function NFTTransactions() {
    const [nftTransactions, setNFTData] = useState(null);
    const { account,chainId } = useEthers()
    const addressNFT = Constants.NFT_ADDRESS
	useEffect(() => {
		getData();
		async function getData() {
      const headers = {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
     
        }}
     
		  const response = await fetch(`https://api-testnet.polygonscan.com/api?module=account&action=tokennfttx&contractaddress=${addressNFT}&address=${account}&startblock=0&endblock=99999999&page=1&offset=100&sort=asc&apikey=41F7V8C88V3RJ9QIAHHCS5DRDCIN3W2F45`,headers )
		  const data = await response.json();
      
		  setNFTData(data) ;
		}
	  }, []);
            const printed = JSON.stringify(nftTransactions, null,3);
  return (
    <MainContent>
      <Container>
        <Section>
          <SectionRow>
          <Title><Avatar round="20px" style={{opacity: 0.8}} src='https://i.imgur.com/cOQzFs0.png' /> Search TokenID  </Title> 
          <AccountButton />
          </SectionRow>
          <TextInline>  ERC-721 Token Transfer Events @Polygon  <Label>@https://api-testnet.polygonscan.com</Label>
            <Label> {account} @ {addressNFT}</Label>
            </TextInline>
          <ContentBlock>
          <ReactJson collapsed={2} displayDataTypes={false} theme={{
                base00: "white",
                base01: "#a876f5",
                base02: "#a876f5",
                base03: "#9c54fc",
                base04: "#9c54fc",
                base05: "#444",
                base06: "#444",
                base07: "#444",
                base08: "#444",
                base09: "#9c54fc",
                base0A: "rgba(70, 70, 230, 1)",
                base0B: "rgba(70, 70, 230, 1)",
                base0C: "rgba(70, 70, 230, 1)",
                base0D: "rgba(70, 70, 230, 1)",
                base0E: "rgba(70, 70, 230, 1)",
                base0F: "#d0baf5"
            }}
          src={{nftTransactions}} />
          </ContentBlock>
          <Icon as={AboutSvg} />
        </Section>
      </Container>
    </MainContent>
  )
}
